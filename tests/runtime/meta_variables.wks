# @desc: Meta-variables (variable names with interpolations)

# @test: "a"
# @expect: echo Hello, World!

# @test: "b"
# @expect: echo success

# @test: "c"
# @expect: echo echo works

# @test: "d"
# @expect: echo value

# @test: "e"
# @expect: echo result

# @test: "f"
# @expect: echo first

# Test meta-variables (variables with interpolated names)

# Test 1: Basic meta-variable - variable name from another variable
:var "key_name" "GREETING"
:var "%(key_name)" "Hello, World!"
a "Test meta-var" +write %{{echo %(GREETING)}}

# Test 2: Meta-variable with multiple parts
:var "prefix" "MY"
:var "suffix" "VAR"
:var "%(prefix)_%(suffix)" "success"
b "Multi-part meta" +write %{{echo %(MY_VAR)}}

# Test 3: Nested variable references in both name and value
:var "var_a" "CMD"
:var "%(var_a)" "echo"
c "Nested refs" +write %{{echo %(CMD) works}}

# Test 4: Meta-variable with trailing text in name
:var "base" "FOO"
:var "%(base)_BAR" "value"
d "Trailing text in name" +write %{{echo %(FOO_BAR)}}

# Test 5: Meta-variable with leading text in name
:var "end" "DATA"
:var "MY_%(end)" "result"
e "Leading text in name" +write %{{echo %(MY_DATA)}}

# Test 6: Variable value referencing another variable
:var "original" "first"
:var "derived" "%(original)"
f "Var refs var" +write %{{echo %(derived)}}
