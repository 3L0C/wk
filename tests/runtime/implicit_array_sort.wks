# @desc: Implicit array sorting behavior

# @test: "d"
# @expect: test-d-0

# @test: "a"
# @expect: test-a-3

# @test: "C-a"
# @expect: test-a-7

# @test: "C-d"
# @expect: test-d-4

# @test: "M-d"
# @expect: test-d-8

# @test: "M-a"
# @expect: test-a-11

# @test: "S-a"
# @expect: test-a-15

# @test: "S-d"
# @expect: test-d-12

# @test: "H-d"
# @expect: test-d-16

# @test: "H-a"
# @expect: test-a-19

:implicit-array-keys "dcba"

# Test 1: Implicit array without flags (should stay in dcba order)
... "Test %(index+1) unsorted" +write %{{test-%(key)-%(index)}}

# Test 2: Implicit array with +sort (should be sorted to abcd)
C-... "Test %(index+1) sorted" +sort +write %{{test-%(key)-%(index)}}

# Test 3: Implicit array with explicit +ignore-sort (redundant, should be dcba)
M-... "Test %(index+1) explicit ignore" +ignore-sort +write %{{test-%(key)-%(index)}}

# Test 4: Both flags, +sort wins (last one wins)
S-... "Test %(index+1) sort wins" +ignore-sort +sort +write %{{test-%(key)-%(index)}}

# Test 5: Both flags, +ignore-sort wins (last one wins)
H-... "Test %(index+1) ignore wins" +sort +ignore-sort +write %{{test-%(key)-%(index)}}
